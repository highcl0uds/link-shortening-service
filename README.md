# Link Shortening Service

Консольное приложение для создания и управления короткими ссылками с поддержкой мультипользовательского режима, лимитов переходов и автоматического удаления протухших ссылок.

## Функциональность

- Создание уникальных коротких ссылок для каждого пользователя
- Лимит переходов по ссылке с автоматической блокировкой при достижении
- Автоматическое удаление ссылок по истечении времени жизни (TTL)
- Мультипользовательский режим с UUID-идентификацией
- Редактирование параметров ссылок (только владельцем)
- Автоматический переход в браузер по короткой ссылке
- Конфигурация через файл `config.properties`

## Архитектура

Проект построен по принципу разделения на слои (core/infra/UI):

- **Core** - бизнес-логика (модели Link/User, сервисы LinksService/UsersService)
- **Infrastructure** - конфигурация приложения (Config)
- **UI** - консольный интерфейс (MenuService)
- **Utils** - вспомогательные классы (ShortIDGenerator с использованием SecureRandom)

**Ключевые решения:**
- Генерация коротких ID через SecureRandom с проверкой коллизий
- ScheduledExecutorService для автоматической очистки протухших ссылок
- ConcurrentHashMap для thread-safe операций
- UUID для идентификации пользователей и проверки прав доступа

## Установка и запуск

**Требования:** Java 11+

**Способ 1 - через Maven:**
```bash
mvn clean package
java -jar target/link-shortening-service-1.0.0.jar
```

**Способ 2 - ручная компиляция:**
```bash
mkdir -p out/production
javac -d out/production -sourcepath src/main/java $(find src/main/java -name "*.java")
java -cp out/production main.Main
```

## Конфигурация

Параметры настраиваются в файле `config.properties`:
- `base.url` - базовый URL для коротких ссылок
- `links.lifetime.minutes` - время жизни ссылки (TTL)
- `links.max.conversion.amount` - лимит переходов по умолчанию
- `links.clear.interval.minutes` - интервал автоочистки протухших ссылок
- `generator.alphabet` - алфавит для генерации ID
- `generator.length` - длина генерируемого ID

## Примеры команд

**Создание пользователя:**
```
Введите UUID пользователя (например: 123e4567-e89b-12d3-a456-426614174000) или нажмите Enter оставив ввод пустым для создания нового пользователя: [Enter для создания нового]
Вы используете пользователя: 123e4567-e89b-12d3-a456-426614174000
```

**Создание короткой ссылки:**
```
Выберите действие: 1
Введите url: https://www.example.com
Введите количество переходов: 5
Короткий url: clck.ru/aB3dEf
```

**Переход по ссылке:**
```
Выберите действие: 3
Введите id/короткий url: aB3dEf
Осуществляется переход по ссылке clck.ru/aB3dEf(https://www.example.com)... [Открывается браузер]
```

**Редактирование лимита:**
```
Выберите действие: 5
Введите id ссылки: aB3dEf
Введите желаемое количество переходов: 10
Количество переходов по ссылке успешно изменено, сейчас: 0/10
```

**Уведомления:**
- При исчерпании лимита: "Переход по ссылке невозможен: количество переходов 5/5..."
- При протухании ссылки: "Переход по ссылке невозможен: ссылка протухла 2025-11-10T23:00..."

## Тестирование

На данный момент проект не содержит автоматизированных тестов.

Для запуска тестов после их добавления:
```bash
mvn test
```
